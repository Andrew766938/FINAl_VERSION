<!DOCTYPE html><html lang="ru"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><title>üöÄ –ú–æ–π –ë–ª–æ–≥</title><link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet"><style>*{margin:0;padding:0;box-sizing:border-box}body{font-family:'Poppins',sans-serif;background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);min-height:100vh;color:#fff}.container{max-width:1200px;margin:0 auto;padding:20px}header{background:rgba(255,255,255,0.1);backdrop-filter:blur(10px);border-radius:20px;padding:30px;margin-bottom:30px;box-shadow:0 8px 32px rgba(0,0,0,0.1)}h1{font-size:3em;font-weight:700;text-align:center;margin-bottom:10px;text-shadow:2px 2px 4px rgba(0,0,0,0.2)}h2{font-size:1.8em;font-weight:600;margin:30px 0 15px;color:#ffd700;text-shadow:1px 1px 2px rgba(0,0,0,0.2)}.section{background:rgba(255,255,255,0.15);backdrop-filter:blur(10px);border-radius:15px;padding:25px;margin-bottom:20px;box-shadow:0 4px 16px rgba(0,0,0,0.1);border:1px solid rgba(255,255,255,0.2);animation:fadeIn 0.5s}input,textarea{width:100%;padding:12px 15px;margin:8px 0;border:2px solid rgba(255,255,255,0.3);border-radius:10px;background:rgba(255,255,255,0.9);color:#333;font-size:14px;transition:all 0.3s}input:focus,textarea:focus{outline:none;border-color:#ffd700;box-shadow:0 0 15px rgba(255,215,0,0.4)}button{padding:12px 25px;margin:5px;border:none;border-radius:10px;font-weight:600;font-size:14px;cursor:pointer;transition:all 0.3s;box-shadow:0 4px 10px rgba(0,0,0,0.2)}button:hover{transform:translateY(-2px);box-shadow:0 6px 15px rgba(0,0,0,0.3)}.btn-primary{background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);color:#fff}.btn-success{background:linear-gradient(135deg,#11998e 0%,#38ef7d 100%);color:#fff}.btn-danger{background:linear-gradient(135deg,#ee0979 0%,#ff6a00 100%);color:#fff}.btn-warning{background:linear-gradient(135deg,#f093fb 0%,#f5576c 100%);color:#fff}.btn-info{background:linear-gradient(135deg,#4facfe 0%,#00f2fe 100%);color:#fff}.post{background:rgba(255,255,255,0.2);border-radius:12px;padding:20px;margin:15px 0;border-left:5px solid #ffd700;box-shadow:0 4px 12px rgba(0,0,0,0.15)}.post h3{color:#ffd700;margin-bottom:10px}.post-meta{font-size:12px;color:rgba(255,255,255,0.7);margin:10px 0}.comments{margin-top:15px;padding:15px;background:rgba(255,255,255,0.1);border-radius:10px}.comment{padding:10px;margin:8px 0;background:rgba(255,255,255,0.15);border-radius:8px;font-size:14px}.friend{background:rgba(255,255,255,0.2);border-radius:10px;padding:15px;margin:10px 0;border-left:4px solid #00f2fe}.token-display{font-size:11px;word-break:break-all;background:rgba(0,0,0,0.2);padding:10px;border-radius:8px;margin-top:10px}.row{margin-bottom:15px}@keyframes fadeIn{from{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}</style></head><body><div class="container"><header><h1>üöÄ –ú–æ–π –ë–ª–æ–≥</h1><p style="text-align:center;font-size:1.2em">–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –±–ª–æ–≥!</p></header><section class="section"><h2>üîê –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è</h2><div class="row"><input id="register-name" placeholder="–í–∞—à–µ –∏–º—è"/><input id="register-email" placeholder="Email"/><input id="register-password" placeholder="–ü–∞—Ä–æ–ª—å" type="password"/><button class="btn-success" onclick="register()">‚ú® –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</button></div><div class="row"><input id="login-email" placeholder="Email"/><input id="login-password" placeholder="–ü–∞—Ä–æ–ª—å" type="password"/><button class="btn-primary" onclick="login()">üîì –í–æ–π—Ç–∏</button></div><div class="token-display"><strong>–¢–æ–∫–µ–Ω:</strong> <span id="token"></span></div></section><section class="section"><h2>üìù –ü–æ—Å—Ç—ã</h2><div class="row"><input id="post-title" placeholder="–ó–∞–≥–æ–ª–æ–≤–æ–∫"/><textarea id="post-content" placeholder="–¢–µ–∫—Å—Ç..." rows="4"></textarea><button class="btn-success" onclick="createPost()">‚ûï –°–æ–∑–¥–∞—Ç—å</button><button class="btn-info" onclick="loadPosts()">üîÑ –û–±–Ω–æ–≤–∏—Ç—å</button></div><div id="posts"></div></section><section class="section"><h2>üë• –î—Ä—É–∑—å—è</h2><div class="row"><input id="friend-id" placeholder="ID"/><button class="btn-success" onclick="addFriend()">‚ûï –î–æ–±–∞–≤–∏—Ç—å</button></div><div class="row"><button class="btn-info" onclick="loadMyFriends()">üë• –ú–æ–∏ –¥—Ä—É–∑—å—è</button><button class="btn-info" onclick="loadMyFollowers()">üë§ –ü–æ–¥–ø–∏—Å—á–∏–∫–∏</button></div><div id="friends"></div></section></div><script>const API_BASE="";function getToken(){return localStorage.getItem("access_token")||""}function setToken(t){localStorage.setItem("access_token",t);document.getElementById("token").innerText=t}function authHeaders(){const t=getToken();return t?{"Authorization":"Bearer "+t}:{}}async function register(){const n=document.getElementById("register-name").value,e=document.getElementById("register-email").value,p=document.getElementById("register-password").value;try{const r=await fetch(API_BASE+"/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:n,email:e,password:p})});r.ok?alert("‚úÖ –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —É—Å–ø–µ—à–Ω–∞!"):alert("‚ùå –û—à–∏–±–∫–∞")}catch(e){alert("‚ùå –û—à–∏–±–∫–∞")}}async function login(){const e=document.getElementById("login-email").value,p=document.getElementById("login-password").value,params=new URLSearchParams();params.append("username",e);params.append("password",p);try{const r=await fetch(API_BASE+"/auth/login",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:params});if(!r.ok){alert("‚ùå –û—à–∏–±–∫–∞");return}const data=await r.json();setToken(data.access_token);alert("‚úÖ –í—Ö–æ–¥ —É—Å–ø–µ—à–µ–Ω!")}catch(e){alert("‚ùå –û—à–∏–±–∫–∞")}}async function createPost(){const t=document.getElementById("post-title").value,c=document.getElementById("post-content").value;try{const r=await fetch(API_BASE+"/posts/",{method:"POST",headers:{"Content-Type":"application/json",...authHeaders()},body:JSON.stringify({title:t,content:c})});r.ok?(alert("‚úÖ –ü–æ—Å—Ç —Å–æ–∑–¥–∞–Ω!"),await loadPosts()):alert("‚ùå –û—à–∏–±–∫–∞")}catch(e){alert("‚ùå –û—à–∏–±–∫–∞")}}async function loadPosts(){const c=document.getElementById("posts");c.innerHTML="‚åõ –ó–∞–≥—Ä—É–∑–∫–∞...";try{const r=await fetch(API_BASE+"/posts/");if(!r.ok){c.innerHTML="‚ùå –û—à–∏–±–∫–∞";return}const p=await r.json();c.innerHTML="";p.forEach(p=>{const d=document.createElement("div");d.className="post";d.innerHTML=`<h3>${p.title}</h3><p>${p.content}</p><div class="post-meta">üìå ID:${p.id}|üë§ –ê–≤—Ç–æ—Ä:${p.user_id}|‚ù§Ô∏è ${p.likes_count}</div><div style="margin-top:15px"><button class="btn-warning" onclick="likePost(${p.id})">‚ù§Ô∏è –õ–∞–π–∫</button><button class="btn-info" onclick="unlikePost(${p.id})">üíî –£–±—Ä–∞—Ç—å</button><button class="btn-danger" onclick="deletePost(${p.id})">üóëÔ∏è –£–¥–∞–ª–∏—Ç—å</button></div><div class="comments" id="comments-${p.id}"><h4 style="color:#ffd700">üí¨ –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏</h4><textarea id="comment-input-${p.id}" rows="2" placeholder="–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π..."></textarea><button class="btn-success" onclick="createComment(${p.id})">‚ûï –î–æ–±–∞–≤–∏—Ç—å</button><button class="btn-info" onclick="loadComments(${p.id})">üîÑ –û–±–Ω–æ–≤–∏—Ç—å</button><div id="comments-list-${p.id}"></div></div>`;c.appendChild(d);loadComments(p.id)})}catch(e){c.innerHTML="‚ùå –û—à–∏–±–∫–∞"}}async function deletePost(id){if(!confirm("–£–¥–∞–ª–∏—Ç—å?"))return;try{const r=await fetch(API_BASE+"/posts/"+id,{method:"DELETE",headers:authHeaders()});r.ok?await loadPosts():alert("‚ùå –û—à–∏–±–∫–∞")}catch(e){alert("‚ùå –û—à–∏–±–∫–∞")}}async function likePost(id){try{const r=await fetch(API_BASE+"/likes/posts/"+id,{method:"POST",headers:authHeaders()});r.ok?await loadPosts():alert("‚ùå –û—à–∏–±–∫–∞")}catch(e){alert("‚ùå –û—à–∏–±–∫–∞")}}async function unlikePost(id){try{const r=await fetch(API_BASE+"/likes/posts/"+id,{method:"DELETE",headers:authHeaders()});r.ok?await loadPosts():alert("‚ùå –û—à–∏–±–∫–∞")}catch(e){alert("‚ùå –û—à–∏–±–∫–∞")}}async function createComment(pid){const t=document.getElementById("comment-input-"+pid).value;try{const r=await fetch(API_BASE+`/comments/posts/${pid}`,{method:"POST",headers:{"Content-Type":"application/json",...authHeaders()},body:JSON.stringify({content:t})});r.ok?(document.getElementById("comment-input-"+pid).value="",await loadComments(pid)):alert("‚ùå –û—à–∏–±–∫–∞")}catch(e){alert("‚ùå –û—à–∏–±–∫–∞")}}async function loadComments(pid){const c=document.getElementById("comments-list-"+pid);if(!c)return;c.innerHTML="–ó–∞–≥—Ä—É–∑–∫–∞...";try{const r=await fetch(API_BASE+`/comments/posts/${pid}`);if(!r.ok){c.innerHTML="‚ùå –û—à–∏–±–∫–∞";return}const cms=await r.json();c.innerHTML="";cms.forEach(cm=>{const d=document.createElement("div");d.className="comment";d.innerHTML=`<b>${cm.user_id}</b>: ${cm.content}`;c.appendChild(d)})}catch(e){c.innerHTML="‚ùå –û—à–∏–±–∫–∞"}}async function addFriend(){const fid=document.getElementById("friend-id").value;try{const r=await fetch(API_BASE+`/friends/${fid}`,{method:"POST",headers:authHeaders()});r.ok?(alert("–î–æ–±–∞–≤–ª–µ–Ω!"),await loadMyFriends()):alert("‚ùå –û—à–∏–±–∫–∞")}catch(e){alert("‚ùå –û—à–∏–±–∫–∞")}}async function loadMyFriends(){const c=document.getElementById("friends");c.innerHTML="–ó–∞–≥—Ä—É–∑–∫–∞...";try{const r=await fetch(API_BASE+"/friends/me",{headers:authHeaders()});if(!r.ok){c.innerHTML="‚ùå –û—à–∏–±–∫–∞";return}const f=await r.json();c.innerHTML="<h3>üë• –ú–æ–∏ –¥—Ä—É–∑—å—è</h3>";f.forEach(fr=>{const d=document.createElement("div");d.className="friend";d.innerHTML=`user_id: ${fr.user_id}, friend_id: ${fr.friend_id} <button class="btn-danger" onclick="removeFriend(${fr.friend_id})">–£–¥–∞–ª–∏—Ç—å</button>`;c.appendChild(d)})}catch(e){c.innerHTML="‚ùå –û—à–∏–±–∫–∞"}}async function loadMyFollowers(){const c=document.getElementById("friends");c.innerHTML="–ó–∞–≥—Ä—É–∑–∫–∞...";try{const r=await fetch(API_BASE+"/friends/followers",{headers:authHeaders()});if(!r.ok){c.innerHTML="‚ùå –û—à–∏–±–∫–∞";return}const f=await r.json();c.innerHTML="<h3>üë§ –ü–æ–¥–ø–∏—Å—á–∏–∫–∏</h3>";f.forEach(fr=>{const d=document.createElement("div");d.className="friend";d.innerHTML=`user_id: ${fr.user_id}, friend_id: ${fr.friend_id}`;c.appendChild(d)})}catch(e){c.innerHTML="‚ùå –û—à–∏–±–∫–∞"}}async function removeFriend(fid){try{const r=await fetch(API_BASE+`/friends/${fid}`,{method:"DELETE",headers:authHeaders()});r.ok?await loadMyFriends():alert("‚ùå –û—à–∏–±–∫–∞")}catch(e){alert("‚ùå –û—à–∏–±–∫–∞")}}window.onload=()=>{const t=getToken();if(t)document.getElementById("token").innerText=t;loadPosts()}</script></body></html>
